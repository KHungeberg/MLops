import requests
response = requests.get('https://api.github.com/this-api-should-not-exist')
print(response.status_code)

if response.status_code == 403:
    print("Access forbidden: You might have hit the rate limit or lack permissions.")

print('next exercise!')

response=requests.get("https://api.github.com/repos/SkafteNicki/dtu_mlops")

response_readable = response.json()
# print(response_readable)
# print(response.content)

## Next one!

response = requests.get(
    'https://api.github.com/search/repositories',
    params={'q': 'requests+language:python'},
)

response_readable = response.json()

#print(response_readable)

#Exercise 6

response = requests.get('https://imgs.xkcd.com/comics/making_progress.png')

# response.json()  # This will raise an error because the content is not JSON

with open(r'img.png','wb') as f:
    f.write(response.content)

print('Image saved!')

### Next exercise

pload = {'username':'Olivia','password':'123'}
response = requests.post('https://httpbin.org/post', data = pload)

print(response.json())  # This will print the JSON response from the server

